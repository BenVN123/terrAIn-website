{
  "description": "API for retrieving sensor data from Dirt Mesh LA network",
  "endpoints": [
    {
      "description": "Get information about all nodes",
      "method": "GET",
      "path": "/api/nodes"
    },
    {
      "description": "Get information about a specific node",
      "method": "GET",
      "path": "/api/nodes/<node_id>"
    },
    {
      "description": "Get the last n readings for all nodes or specific nodes",
      "method": "GET",
      "path": "/api/readings",
      "query_params": [
        {
          "default": 10,
          "description": "Number of readings to retrieve per node",
          "name": "n",
          "type": "integer"
        },
        {
          "description": "Comma-separated list of node IDs",
          "name": "nodes",
          "optional": true,
          "type": "string"
        }
      ]
    },
    {
      "description": "Generate agricultural insights using LLM",
      "method": "GET",
      "path": "/api/call_llm",
      "query_params": [
        {
          "default": "small",
          "description": "Type of prompt to use (small, large, or custom)",
          "name": "prompt_type",
          "type": "string"
        },
        {
          "default": 10,
          "description": "Number of readings to analyze (for small prompt)",
          "name": "n_readings",
          "type": "integer"
        },
        {
          "description": "Custom prompt text (for custom prompt type)",
          "name": "custom_prompt",
          "optional": true,
          "type": "string"
        },
        {
          "default": false,
          "description": "Whether to include weather forecast data",
          "name": "include_weather",
          "type": "boolean"
        },
        {
          "description": "Latitude for weather data (required if include_weather=True)",
          "name": "lat",
          "optional": true,
          "type": "float"
        },
        {
          "description": "Longitude for weather data (required if include_weather=True)",
          "name": "lon",
          "optional": true,
          "type": "float"
        }
      ]
    },
    {
      "description": "Health check endpoint",
      "method": "GET",
      "path": "/api/health"
    }
  ],
  "name": "Dirt Mesh LA API",
  "version": "1.0.0",
  "websockets": [
    {
      "description": "All MQTT messages",
      "event": "mqtt_message"
    },
    {
      "description": "Temperature sensor readings",
      "event": "sensors_temperature"
    },
    {
      "description": "GNSS position readings",
      "event": "sensors_gnss"
    }
  ]
}
